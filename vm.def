// this stuff is used to make vscode happy!
// include, define and extern gets removed
// during vm-generation (see vm_gen.php).

#include "vm.h"
#include <assert.h>
#define NEXT return;
#define HALT return;
#define OPCODE(A, ...) void dummy__ ## A ()
extern struct vm *vm;
extern struct vm_arg *_0;
extern struct vm_arg *_1;

// actual code starts here:

OPCODE(NOP) {
  NEXT
}

OPCODE(STK, NUM) {
  init_stk(vm, _0->data.num);
  NEXT
}

OPCODE(SET, VID, NUM|STR|SYM) {
  updt_var(vm, _0->data.vid, _1);
  NEXT
}

OPCODE(INI, SYM|VID, NUM) {
  init_inv(vm, _0, _1->data.num);
  NEXT
}

OPCODE(SND, VID|NUM|SYM|STR) {
  if (_0->type == OPT_VID) {
    send_var(vm, _0->data.vid);
    NEXT
  }
  send_val(vm, _0);
  NEXT
}

OPCODE(EXC) {
  exec_inv(vm);
  NEXT
}

OPCODE(DEL, VID) {
  free_var(vm, _0->data.vid);
  NEXT
}

OPCODE(END) {
  free_stk(vm);
  HALT
}
